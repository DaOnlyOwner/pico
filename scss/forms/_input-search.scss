@use "sass:map";
@use "../settings" as *;

@if map.get($modules, "forms/input-search") {
  /**
   * Input type search
   */

  // :not() are needed to add Specificity and avoid !important on padding
  input:not([type="checkbox"], [type="radio"], [type="range"], [type="file"]) {
    &[type="search"] {
      padding-inline-start: calc(var(#{$✨}form-element-spacing-horizontal) + 1.75em);
      background-image: var(#{$✨}icon-search);
      background-position: center left 1.125em;
      background-size: 1em auto;
      background-repeat: no-repeat;

      &[aria-invalid] {
        @if $enable-important {
          padding-inline-start: calc(
            var(#{$✨}form-element-spacing-horizontal) + 1.75em
          ) !important;
        } @else {
          padding-inline-start: calc(var(#{$✨}form-element-spacing-horizontal) + 1.75em);
        }
        background-position: center left 1.125em, center right 0.75em;
      }

      &[aria-invalid="false"] {
        background-image: var(#{$✨}icon-search), var(#{$✨}icon-valid);
      }

      &[aria-invalid="true"] {
        background-image: var(#{$✨}icon-search), var(#{$✨}icon-invalid);
      }
    }
  }

  [dir="rtl"] {
    :where(input) {
      &:not([type="checkbox"], [type="radio"], [type="range"], [type="file"]) {
        &[type="search"] {
          background-position: center right 1.125em;

          &[aria-invalid] {
            background-position: center right 1.125em, center left 0.75em;
          }
        }
      }
    }
  }
}
